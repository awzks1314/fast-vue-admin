var F=Object.defineProperty;var L=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var _=(t,s,i)=>s in t?F(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i,S=(t,s)=>{for(var i in s||(s={}))R.call(s,i)&&_(t,i,s[i]);if(L)for(var i of L(s))x.call(s,i)&&_(t,i,s[i]);return t};import V from"./vertical.add4f9f4.js";import{u as W}from"./index.6243c594.js";import j from"./index.1bd1a64b.js";import{a as k,z as g,B as b,A,b as M,t as z,g as I,e as f,f as h,h as C,S as d,E as w,i as c}from"./vendor.445db117.js";import"./subItem.f5894778.js";var B={name:"layoutAside",components:{Vertical:V,Logo:j},setup(){const{proxy:t}=I(),s=W(),i=k({menuList:[],clientWidth:0}),l=g(()=>s.state.themeConfig.themeConfig),p=g(()=>{let{layout:e,isCollapse:o,menuBar:n}=s.state.themeConfig.themeConfig,m=n==="#FFFFFF"||n==="#FFF"||n==="#fff"||n==="#ffffff"?"layout-el-aside-br-color":"";return e==="columns"?o?["layout-aside-width1",m]:["layout-aside-width-default",m]:o?["layout-aside-width64",m]:["layout-aside-width-default",m]}),y=g(()=>{let{layout:e,isShowLogo:o}=s.state.themeConfig.themeConfig;return o&&e==="defaults"||o&&e==="columns"}),a=()=>{if(s.state.themeConfig.themeConfig.layout==="columns")return!1;i.menuList=r(s.state.routesList.routesList)},r=e=>e.filter(o=>!o.meta.isHide).map(o=>(o=Object.assign({},o),o.children&&(o.children=r(o.children)),o)),u=e=>{i.clientWidth=e};return b(s.state.themeConfig.themeConfig,e=>{if(e.isShowLogoChange!=e.isShowLogo){if(!t.$refs.layoutAsideScrollbarRef)return!1;t.$refs.layoutAsideScrollbarRef.update()}}),b(s.state,e=>{if(e.routesList.routesList.length===i.menuList.length)return!1;let{layout:o,isClassicSplitMenu:n}=e.themeConfig.themeConfig;if(o==="classic"&&n)return!1;a()}),A(()=>{u(document.body.clientWidth),a(),t.mittBus.on("setSendColumnsChildren",e=>{i.menuList=e.children}),t.mittBus.on("setSendClassicChildren",e=>{let{layout:o,isClassicSplitMenu:n}=s.state.themeConfig.themeConfig;o==="classic"&&n&&(i.menuList=[],i.menuList=e.children)}),t.mittBus.on("getBreadcrumbIndexSetFilterRoutes",()=>{a()}),t.mittBus.on("layoutMobileResize",e=>{u(e.clientWidth)})}),M(()=>{t.mittBus.off("setSendColumnsChildren"),t.mittBus.off("setSendClassicChildren"),t.mittBus.off("getBreadcrumbIndexSetFilterRoutes"),t.mittBus.off("layoutMobileResize")}),S({setShowLogo:y,setCollapseWidth:p,getThemeConfig:l},z(i))}};function v(t,s,i,l,p,y){const a=f("Logo"),r=f("Vertical"),u=f("el-scrollbar"),e=f("el-aside"),o=f("el-drawer");return t.clientWidth>1e3?(h(),C(e,{key:0,class:["layout-aside",l.setCollapseWidth]},{default:d(()=>[l.setShowLogo?(h(),C(a,{key:0})):w("",!0),c(u,{class:"flex-auto",ref:"layoutAsideScrollbarRef"},{default:d(()=>[c(r,{menuList:t.menuList,class:l.setCollapseWidth},null,8,["menuList","class"])]),_:1},512)]),_:1},8,["class"])):(h(),C(o,{key:1,modelValue:l.getThemeConfig.isCollapse,"onUpdate:modelValue":s[1]||(s[1]=n=>l.getThemeConfig.isCollapse=n),"with-header":!1,direction:"ltr",size:"220px"},{default:d(()=>[c(e,{class:"layout-aside w100 h100"},{default:d(()=>[l.setShowLogo?(h(),C(a,{key:0})):w("",!0),c(u,{class:"flex-auto",ref:"layoutAsideScrollbarRef"},{default:d(()=>[c(r,{menuList:t.menuList},null,8,["menuList"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"]))}B.render=v;export default B;
