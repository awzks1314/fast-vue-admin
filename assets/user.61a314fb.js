var e=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(s,a,o)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[a]=o;import{y as n,X as t,r,a as i,z as u,o as c,t as d,s as m,H as f,g,p as b,d as p,e as h,f as w,h as v,i as C,T as S,w as y,v as k,k as I,l as O,q as U}from"./vendor.1cfc7906.js";import{s as _}from"./screenfull.23c35388.js";import{u as N,L as z,S as $,r as x}from"./index.26fce307.js";import P from"./userNews.65528adb.js";import j from"./search.c5f295c3.js";var B={name:"layoutBreadcrumbUser",components:{UserNews:P,Search:j},setup(){const{t:e}=n(),{proxy:b}=g(),p=t(),h=N(),w=r(),v=i({isScreenfull:!1,isShowUserNewsPopover:!1,disabledI18n:!1}),C=u((()=>h.state.userInfos.userInfos)),S=u((()=>h.state.themeConfig.themeConfig)),y=u((()=>{let{layout:e,isClassicSplitMenu:s}=S.value,a="";return a="defaults"===e||"classic"===e&&!s||"columns"===e?1:null,a})),k=()=>{switch(z.get("themeConfig").globalI18n){case"zh-cn":v.disabledI18n="zh-cn";break;case"en":v.disabledI18n="en";break;case"zh-tw":v.disabledI18n="zh-tw"}};return c((()=>{z.get("themeConfig")&&k()})),((e,n)=>{for(var t in n||(n={}))a.call(n,t)&&l(e,t,n[t]);if(s)for(var t of s(n))o.call(n,t)&&l(e,t,n[t]);return e})({getUserInfos:C,onLayoutSetingClick:()=>{b.mittBus.emit("openSetingsDrawer")},onHandleCommandClick:s=>{"logOut"===s?f({closeOnClickModal:!1,closeOnPressEscape:!1,title:e("message.user.logOutTitle"),message:e("message.user.logOutMessage"),showCancelButton:!0,confirmButtonText:e("message.user.logOutConfirm"),cancelButtonText:e("message.user.logOutCancel"),beforeClose:(s,a,o)=>{"confirm"===s?(a.confirmButtonLoading=!0,a.confirmButtonText=e("message.user.logOutExit"),setTimeout((()=>{o(),setTimeout((()=>{a.confirmButtonLoading=!1}),300)}),700)):o()}}).then((()=>{$.clear(),x(),p.push("/login"),setTimeout((()=>{m.success(e("message.user.logOutSuccess"))}),300)})).catch((()=>{})):p.push(s)},onScreenfullClick:()=>{if(!_.isEnabled)return m.warning("暂不不支持全屏"),!1;_.toggle(),v.isScreenfull=!v.isScreenfull},onSearchClick:()=>{w.value.openSearch()},onLanguageChange:e=>{z.remove("themeConfig"),S.value.globalI18n=e,z.set("themeConfig",S.value),b.$i18n.locale=e,k()},searchRef:w,layoutUserFlexNum:y},d(v))}};const L=U();b("data-v-1b1d5fda");const T={class:"layout-navbars-breadcrumb-user-icon"},E=I("简体中文"),H=I("English"),M=I("繁體中文"),q={class:"layout-navbars-breadcrumb-user-icon"},F={class:"layout-navbars-breadcrumb-user-link"},R=C("i",{class:"el-icon-arrow-down el-icon--right"},null,-1);p();const D=L(((e,s,a,o,l,n)=>{const t=h("el-dropdown-item"),r=h("el-dropdown-menu"),i=h("el-dropdown"),u=h("el-badge"),c=h("UserNews"),d=h("el-popover"),m=h("Search");return w(),v("div",{class:"layout-navbars-breadcrumb-user",style:{flex:o.layoutUserFlexNum}},[C(i,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:o.onLanguageChange},{dropdown:L((()=>[C(r,null,{default:L((()=>[C(t,{command:"zh-cn",disabled:"zh-cn"===e.disabledI18n},{default:L((()=>[E])),_:1},8,["disabled"]),C(t,{command:"en",disabled:"en"===e.disabledI18n},{default:L((()=>[H])),_:1},8,["disabled"]),C(t,{command:"zh-tw",disabled:"zh-tw"===e.disabledI18n},{default:L((()=>[M])),_:1},8,["disabled"])])),_:1})])),default:L((()=>[C("div",T,[C("i",{class:["iconfont","en"===e.disabledI18n?"icon-fuhao-yingwen":"icon-fuhao-zhongwen"],title:e.$t("message.user.title1")},null,10,["title"])])])),_:1},8,["onCommand"]),C("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:s[1]||(s[1]=(...e)=>o.onSearchClick&&o.onSearchClick(...e))},[C("i",{class:"el-icon-search",title:e.$t("message.user.title2")},null,8,["title"])]),C("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:s[2]||(s[2]=(...e)=>o.onLayoutSetingClick&&o.onLayoutSetingClick(...e))},[C("i",{class:"icon-skin iconfont",title:e.$t("message.user.title3")},null,8,["title"])]),C("div",q,[C(d,{placement:"bottom",trigger:"click",visible:e.isShowUserNewsPopover,"onUpdate:visible":s[4]||(s[4]=s=>e.isShowUserNewsPopover=s),width:300,"popper-class":"el-popover-pupop-user-news"},{reference:L((()=>[C(u,{"is-dot":!0,onClick:s[3]||(s[3]=s=>e.isShowUserNewsPopover=!e.isShowUserNewsPopover)},{default:L((()=>[C("i",{class:"el-icon-bell",title:e.$t("message.user.title4")},null,8,["title"])])),_:1})])),default:L((()=>[C(S,{name:"el-zoom-in-top"},{default:L((()=>[y(C(c,null,null,512),[[k,e.isShowUserNewsPopover]])])),_:1})])),_:1},8,["visible"])]),C("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:s[5]||(s[5]=(...e)=>o.onScreenfullClick&&o.onScreenfullClick(...e))},[C("i",{class:["iconfont",e.isScreenfull?"icon-tuichuquanping":"icon-fullscreen"],title:e.isScreenfull?e.$t("message.user.title5"):e.$t("message.user.title6")},null,10,["title"])]),C(i,{"show-timeout":70,"hide-timeout":50,onCommand:o.onHandleCommandClick},{dropdown:L((()=>[C(r,null,{default:L((()=>[C(t,{command:"/home"},{default:L((()=>[I(O(e.$t("message.user.dropdown1")),1)])),_:1}),C(t,{command:"/404"},{default:L((()=>[I(O(e.$t("message.user.dropdown3")),1)])),_:1}),C(t,{command:"/401"},{default:L((()=>[I(O(e.$t("message.user.dropdown4")),1)])),_:1}),C(t,{divided:"",command:"logOut"},{default:L((()=>[I(O(e.$t("message.user.dropdown5")),1)])),_:1})])),_:1})])),default:L((()=>[C("span",F,[C("img",{src:o.getUserInfos.photo,class:"layout-navbars-breadcrumb-user-link-photo mr5"},null,8,["src"]),I(" "+O(""===o.getUserInfos.userName?"test":o.getUserInfos.userName)+" ",1),R])])),_:1},8,["onCommand"]),C(m,{ref:"searchRef"},null,512)],4)}));B.render=D,B.__scopeId="data-v-1b1d5fda";export default B;
