var $e=Object.defineProperty;var _e=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Se=(n,t,e)=>t in n?$e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,dt=(n,t)=>{for(var e in t||(t={}))Ze.call(t,e)&&Se(n,e,t[e]);if(_e)for(var e of _e(t))Qe.call(t,e)&&Se(n,e,t[e]);return n};import{r as Ft,D as Je,X as Ke,a as tn,z as Ce,B as en,A as nn,b as on,$ as an,o as rn,Y as ln,t as sn,g as un,n as De,p as fn,d as cn,e as Te,f as it,h as at,i as _t,F as xe,W as dn,j as St,E as Ct,l as hn,q as pn}from"./vendor.445db117.js";import{s as gn}from"./screenfull.23c35388.js";import{u as mn,S as Bt}from"./index.70b52c15.js";import vn from"./contextmenu.1ee0d478.js";/**!
 * Sortable 1.13.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Xt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xt=function(t){return typeof t}:Xt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(n)}function bn(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tt(){return tt=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},tt.apply(this,arguments)}function rt(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},o=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),o.forEach(function(i){bn(n,i,e[i])})}return n}function wn(n,t){if(n==null)return{};var e={},o=Object.keys(n),i,r;for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&(e[i]=n[i]);return e}function yn(n,t){if(n==null)return{};var e=wn(n,t),o,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,o)||(e[o]=n[o]))}return e}var En="1.13.0";function et(n){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(n)}var nt=et(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Dt=et(/Edge/i),Ie=et(/firefox/i),Tt=et(/safari/i)&&!et(/chrome/i)&&!et(/android/i),Ae=et(/iP(ad|od|hone)/i),_n=et(/chrome/i)&&et(/android/i),Oe={capture:!1,passive:!1};function S(n,t,e){n.addEventListener(t,e,!nt&&Oe)}function E(n,t,e){n.removeEventListener(t,e,!nt&&Oe)}function Yt(n,t){if(!!t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function Sn(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Z(n,t,e,o){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&Yt(n,t):Yt(n,t))||o&&n===e)return n;if(n===e)break}while(n=Sn(n))}return null}var Pe=/\s+/g;function F(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var o=(" "+n.className+" ").replace(Pe," ").replace(" "+t+" "," ");n.className=(o+(e?" "+t:"")).replace(Pe," ")}}function p(n,t,e){var o=n&&n.style;if(o){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=e+(typeof e=="string"?"":"px")}}function vt(n,t){var e="";if(typeof n=="string")e=n;else do{var o=p(n,"transform");o&&o!=="none"&&(e=o+" "+e)}while(!t&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(e)}function Le(n,t,e){if(n){var o=n.getElementsByTagName(t),i=0,r=o.length;if(e)for(;i<r;i++)e(o[i],i);return o}return[]}function Q(){var n=document.scrollingElement;return n||document.documentElement}function O(n,t,e,o,i){if(!(!n.getBoundingClientRect&&n!==window)){var r,l,s,a,u,c,d;if(n!==window&&n.parentNode&&n!==Q()?(r=n.getBoundingClientRect(),l=r.top,s=r.left,a=r.bottom,u=r.right,c=r.height,d=r.width):(l=0,s=0,a=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||e)&&n!==window&&(i=i||n.parentNode,!nt))do if(i&&i.getBoundingClientRect&&(p(i,"transform")!=="none"||e&&p(i,"position")!=="static")){var w=i.getBoundingClientRect();l-=w.top+parseInt(p(i,"border-top-width")),s-=w.left+parseInt(p(i,"border-left-width")),a=l+r.height,u=s+r.width;break}while(i=i.parentNode);if(o&&n!==window){var D=vt(i||n),y=D&&D.a,_=D&&D.d;D&&(l/=_,s/=y,d/=y,c/=_,a=l+c,u=s+d)}return{top:l,left:s,bottom:a,right:u,width:d,height:c}}}function Ne(n,t,e){for(var o=lt(n,!0),i=O(n)[t];o;){var r=O(o)[e],l=void 0;if(e==="top"||e==="left"?l=i>=r:l=i<=r,!l)return o;if(o===Q())break;o=lt(o,!1)}return!1}function Wt(n,t,e){for(var o=0,i=0,r=n.children;i<r.length;){if(r[i].style.display!=="none"&&r[i]!==g.ghost&&r[i]!==g.dragged&&Z(r[i],e.draggable,n,!1)){if(o===t)return r[i];o++}i++}return null}function ee(n,t){for(var e=n.lastElementChild;e&&(e===g.ghost||p(e,"display")==="none"||t&&!Yt(e,t));)e=e.previousElementSibling;return e||null}function z(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==g.clone&&(!t||Yt(n,t))&&e++;return e}function Re(n){var t=0,e=0,o=Q();if(n)do{var i=vt(n),r=i.a,l=i.d;t+=n.scrollLeft*r,e+=n.scrollTop*l}while(n!==o&&(n=n.parentNode));return[t,e]}function Cn(n,t){for(var e in n)if(!!n.hasOwnProperty(e)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===n[e][o])return Number(e)}return-1}function lt(n,t){if(!n||!n.getBoundingClientRect)return Q();var e=n,o=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var i=p(e);if(e.clientWidth<e.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Q();if(o||t)return e;o=!0}}while(e=e.parentNode);return Q()}function Dn(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function ne(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}var xt;function ke(n,t){return function(){if(!xt){var e=arguments,o=this;e.length===1?n.call(o,e[0]):n.apply(o,e),xt=setTimeout(function(){xt=void 0},t)}}}function Tn(){clearTimeout(xt),xt=void 0}function Ve(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function Me(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}var B="Sortable"+new Date().getTime();function xn(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(i){if(!(p(i,"display")==="none"||i===g.ghost)){n.push({target:i,rect:O(i)});var r=rt({},n[n.length-1].rect);if(i.thisAnimationDuration){var l=vt(i,!0);l&&(r.top-=l.f,r.left-=l.e)}i.fromRect=r}})}},addAnimationState:function(o){n.push(o)},removeAnimationState:function(o){n.splice(Cn(n,{target:o}),1)},animateAll:function(o){var i=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var r=!1,l=0;n.forEach(function(s){var a=0,u=s.target,c=u.fromRect,d=O(u),w=u.prevFromRect,D=u.prevToRect,y=s.rect,_=vt(u,!0);_&&(d.top-=_.f,d.left-=_.e),u.toRect=d,u.thisAnimationDuration&&ne(w,d)&&!ne(c,d)&&(y.top-d.top)/(y.left-d.left)==(c.top-d.top)/(c.left-d.left)&&(a=An(y,w,D,i.options)),ne(d,c)||(u.prevFromRect=c,u.prevToRect=d,a||(a=i.options.animation),i.animate(u,y,d,a)),a&&(r=!0,l=Math.max(l,a),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},a),u.thisAnimationDuration=a)}),clearTimeout(t),r?t=setTimeout(function(){typeof o=="function"&&o()},l):typeof o=="function"&&o(),n=[]},animate:function(o,i,r,l){if(l){p(o,"transition",""),p(o,"transform","");var s=vt(this.el),a=s&&s.a,u=s&&s.d,c=(i.left-r.left)/(a||1),d=(i.top-r.top)/(u||1);o.animatingX=!!c,o.animatingY=!!d,p(o,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=In(o),p(o,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),p(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){p(o,"transition",""),p(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},l)}}}}function In(n){return n.offsetWidth}function An(n,t,e,o){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*o.animation}var bt=[],oe={initializeByDefault:!0},It={mount:function(t){for(var e in oe)oe.hasOwnProperty(e)&&!(e in t)&&(t[e]=oe[e]);bt.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),bt.push(t)},pluginEvent:function(t,e,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var r=t+"Global";bt.forEach(function(l){!e[l.pluginName]||(e[l.pluginName][r]&&e[l.pluginName][r](rt({sortable:e},o)),e.options[l.pluginName]&&e[l.pluginName][t]&&e[l.pluginName][t](rt({sortable:e},o)))})},initializePlugins:function(t,e,o,i){bt.forEach(function(s){var a=s.pluginName;if(!(!t.options[a]&&!s.initializeByDefault)){var u=new s(t,e,t.options);u.sortable=t,u.options=t.options,t[a]=u,tt(o,u.defaults)}});for(var r in t.options)if(!!t.options.hasOwnProperty(r)){var l=this.modifyOption(t,r,t.options[r]);typeof l!="undefined"&&(t.options[r]=l)}},getEventProperties:function(t,e){var o={};return bt.forEach(function(i){typeof i.eventProperties=="function"&&tt(o,i.eventProperties.call(e[i.pluginName],t))}),o},modifyOption:function(t,e,o){var i;return bt.forEach(function(r){!t[r.pluginName]||r.optionListeners&&typeof r.optionListeners[e]=="function"&&(i=r.optionListeners[e].call(t[r.pluginName],o))}),i}};function On(n){var t=n.sortable,e=n.rootEl,o=n.name,i=n.targetEl,r=n.cloneEl,l=n.toEl,s=n.fromEl,a=n.oldIndex,u=n.newIndex,c=n.oldDraggableIndex,d=n.newDraggableIndex,w=n.originalEvent,D=n.putSortable,y=n.extraEventProperties;if(t=t||e&&e[B],!!t){var _,V=t.options,$="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!nt&&!Dt?_=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(o,!0,!0)),_.to=l||e,_.from=s||e,_.item=i||e,_.clone=r,_.oldIndex=a,_.newIndex=u,_.oldDraggableIndex=c,_.newDraggableIndex=d,_.originalEvent=w,_.pullMode=D?D.lastPutMode:void 0;var N=rt({},y,It.getEventProperties(o,t));for(var Y in N)_[Y]=N[Y];e&&e.dispatchEvent(_),V[$]&&V[$].call(t,_)}}var M=function(t,e){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.evt,r=yn(o,["evt"]);It.pluginEvent.bind(g)(t,e,rt({dragEl:f,parentEl:I,ghostEl:m,rootEl:T,nextEl:ht,lastDownEl:Ht,cloneEl:x,cloneHidden:st,dragStarted:Ot,putSortable:P,activeSortable:g.active,originalEvent:i,oldIndex:wt,oldDraggableIndex:At,newIndex:X,newDraggableIndex:ut,hideGhostForTarget:qe,unhideGhostForTarget:ze,cloneNowHidden:function(){st=!0},cloneNowShown:function(){st=!1},dispatchSortableEvent:function(s){k({sortable:e,name:s,originalEvent:i})}},r))};function k(n){On(rt({putSortable:P,cloneEl:x,targetEl:f,rootEl:T,oldIndex:wt,oldDraggableIndex:At,newIndex:X,newDraggableIndex:ut},n))}var f,I,m,T,ht,Ht,x,st,wt,X,At,ut,qt,P,yt=!1,zt=!1,Gt=[],pt,U,ie,ae,Fe,Be,Ot,Et,Pt,Lt=!1,jt=!1,Ut,L,re=[],le=!1,$t=[],Zt=typeof document!="undefined",Qt=Ae,Xe=Dt||nt?"cssFloat":"float",Pn=Zt&&!_n&&!Ae&&"draggable"in document.createElement("div"),Ye=function(){if(!!Zt){if(nt)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),We=function(t,e){var o=p(t),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=Wt(t,0,e),l=Wt(t,1,e),s=r&&p(r),a=l&&p(l),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+O(r).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+O(l).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return l&&(a.clear==="both"||a.clear===d)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=i&&o[Xe]==="none"||l&&o[Xe]==="none"&&u+c>i)?"vertical":"horizontal"},Ln=function(t,e,o){var i=o?t.left:t.top,r=o?t.right:t.bottom,l=o?t.width:t.height,s=o?e.left:e.top,a=o?e.right:e.bottom,u=o?e.width:e.height;return i===s||r===a||i+l/2===s+u/2},Nn=function(t,e){var o;return Gt.some(function(i){if(!ee(i)){var r=O(i),l=i[B].options.emptyInsertThreshold,s=t>=r.left-l&&t<=r.right+l,a=e>=r.top-l&&e<=r.bottom+l;if(l&&s&&a)return o=i}}),o},He=function(t){function e(r,l){return function(s,a,u,c){var d=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(r==null&&(l||d))return!0;if(r==null||r===!1)return!1;if(l&&r==="clone")return r;if(typeof r=="function")return e(r(s,a,u,c),l)(s,a,u,c);var w=(l?s:a).options.group.name;return r===!0||typeof r=="string"&&r===w||r.join&&r.indexOf(w)>-1}}var o={},i=t.group;(!i||Xt(i)!="object")&&(i={name:i}),o.name=i.name,o.checkPull=e(i.pull,!0),o.checkPut=e(i.put),o.revertClone=i.revertClone,t.group=o},qe=function(){!Ye&&m&&p(m,"display","none")},ze=function(){!Ye&&m&&p(m,"display","")};Zt&&document.addEventListener("click",function(n){if(zt)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),zt=!1,!1},!0);var gt=function(t){if(f){t=t.touches?t.touches[0]:t;var e=Nn(t.clientX,t.clientY);if(e){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[B]._onDragOver(o)}}},Rn=function(t){f&&f.parentNode[B]._isOutsideThisEl(t.target)};function g(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=tt({},t),n[B]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return We(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,s){l.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:g.supportPointer!==!1&&"PointerEvent"in window&&!Tt,emptyInsertThreshold:5};It.initializePlugins(this,n,e);for(var o in e)!(o in t)&&(t[o]=e[o]);He(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:Pn,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?S(n,"pointerdown",this._onTapStart):(S(n,"mousedown",this._onTapStart),S(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(n,"dragover",this),S(n,"dragenter",this)),Gt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),tt(this,xn())}g.prototype={constructor:g,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Et=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,f):this.options.direction},_onTapStart:function(t){if(!!t.cancelable){var e=this,o=this.el,i=this.options,r=i.preventOnFilter,l=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,a=(s||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=i.filter;if(Yn(o),!f&&!(/mousedown|pointerdown/.test(l)&&t.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Tt&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Z(a,i.draggable,o,!1),!(a&&a.animated)&&Ht!==a)){if(wt=z(a),At=z(a,i.draggable),typeof c=="function"){if(c.call(this,t,a,this)){k({sortable:e,rootEl:u,name:"filter",targetEl:a,toEl:o,fromEl:o}),M("filter",e,{evt:t}),r&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=Z(u,d.trim(),o,!1),d)return k({sortable:e,rootEl:d,name:"filter",targetEl:a,fromEl:o,toEl:o}),M("filter",e,{evt:t}),!0}),c)){r&&t.cancelable&&t.preventDefault();return}i.handle&&!Z(u,i.handle,o,!1)||this._prepareDragStart(t,s,a)}}},_prepareDragStart:function(t,e,o){var i=this,r=i.el,l=i.options,s=r.ownerDocument,a;if(o&&!f&&o.parentNode===r){var u=O(o);if(T=r,f=o,I=f.parentNode,ht=f.nextSibling,Ht=o,qt=l.group,g.dragged=f,pt={target:f,clientX:(e||t).clientX,clientY:(e||t).clientY},Fe=pt.clientX-u.left,Be=pt.clientY-u.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,f.style["will-change"]="all",a=function(){if(M("delayEnded",i,{evt:t}),g.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Ie&&i.nativeDraggable&&(f.draggable=!0),i._triggerDragStart(t,e),k({sortable:i,name:"choose",originalEvent:t}),F(f,l.chosenClass,!0)},l.ignore.split(",").forEach(function(c){Le(f,c.trim(),ue)}),S(s,"dragover",gt),S(s,"mousemove",gt),S(s,"touchmove",gt),S(s,"mouseup",i._onDrop),S(s,"touchend",i._onDrop),S(s,"touchcancel",i._onDrop),Ie&&this.nativeDraggable&&(this.options.touchStartThreshold=4,f.draggable=!0),M("delayStart",this,{evt:t}),l.delay&&(!l.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Dt||nt))){if(g.eventCanceled){this._onDrop();return}S(s,"mouseup",i._disableDelayedDrag),S(s,"touchend",i._disableDelayedDrag),S(s,"touchcancel",i._disableDelayedDrag),S(s,"mousemove",i._delayedDragTouchMoveHandler),S(s,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&S(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(a,l.delay)}else a()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){f&&ue(f),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;E(t,"mouseup",this._disableDelayedDrag),E(t,"touchend",this._disableDelayedDrag),E(t,"touchcancel",this._disableDelayedDrag),E(t,"mousemove",this._delayedDragTouchMoveHandler),E(t,"touchmove",this._delayedDragTouchMoveHandler),E(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):e?S(document,"touchmove",this._onTouchMove):S(document,"mousemove",this._onTouchMove):(S(f,"dragend",this),S(T,"dragstart",this._onDragStart));try{document.selection?Jt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(o){}},_dragStarted:function(t,e){if(yt=!1,T&&f){M("dragStarted",this,{evt:e}),this.nativeDraggable&&S(document,"dragover",Rn);var o=this.options;!t&&F(f,o.dragClass,!1),F(f,o.ghostClass,!0),g.active=this,t&&this._appendGhost(),k({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(U){this._lastX=U.clientX,this._lastY=U.clientY,qe();for(var t=document.elementFromPoint(U.clientX,U.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(U.clientX,U.clientY),t!==e);)e=t;if(f.parentNode[B]._isOutsideThisEl(t),e)do{if(e[B]){var o=void 0;if(o=e[B]._onDragOver({clientX:U.clientX,clientY:U.clientY,target:t,rootEl:e}),o&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);ze()}},_onTouchMove:function(t){if(pt){var e=this.options,o=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,l=m&&vt(m,!0),s=m&&l&&l.a,a=m&&l&&l.d,u=Qt&&L&&Re(L),c=(r.clientX-pt.clientX+i.x)/(s||1)+(u?u[0]-re[0]:0)/(s||1),d=(r.clientY-pt.clientY+i.y)/(a||1)+(u?u[1]-re[1]:0)/(a||1);if(!g.active&&!yt){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(m){l?(l.e+=c-(ie||0),l.f+=d-(ae||0)):l={a:1,b:0,c:0,d:1,e:c,f:d};var w="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");p(m,"webkitTransform",w),p(m,"mozTransform",w),p(m,"msTransform",w),p(m,"transform",w),ie=c,ae=d,U=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!m){var t=this.options.fallbackOnBody?document.body:T,e=O(f,!0,Qt,!0,t),o=this.options;if(Qt){for(L=t;p(L,"position")==="static"&&p(L,"transform")==="none"&&L!==document;)L=L.parentNode;L!==document.body&&L!==document.documentElement?(L===document&&(L=Q()),e.top+=L.scrollTop,e.left+=L.scrollLeft):L=Q(),re=Re(L)}m=f.cloneNode(!0),F(m,o.ghostClass,!1),F(m,o.fallbackClass,!0),F(m,o.dragClass,!0),p(m,"transition",""),p(m,"transform",""),p(m,"box-sizing","border-box"),p(m,"margin",0),p(m,"top",e.top),p(m,"left",e.left),p(m,"width",e.width),p(m,"height",e.height),p(m,"opacity","0.8"),p(m,"position",Qt?"absolute":"fixed"),p(m,"zIndex","100000"),p(m,"pointerEvents","none"),g.ghost=m,t.appendChild(m),p(m,"transform-origin",Fe/parseInt(m.style.width)*100+"% "+Be/parseInt(m.style.height)*100+"%")}},_onDragStart:function(t,e){var o=this,i=t.dataTransfer,r=o.options;if(M("dragStart",this,{evt:t}),g.eventCanceled){this._onDrop();return}M("setupClone",this),g.eventCanceled||(x=Me(f),x.draggable=!1,x.style["will-change"]="",this._hideClone(),F(x,this.options.chosenClass,!1),g.clone=x),o.cloneId=Jt(function(){M("clone",o),!g.eventCanceled&&(o.options.removeCloneOnHide||T.insertBefore(x,f),o._hideClone(),k({sortable:o,name:"clone"}))}),!e&&F(f,r.dragClass,!0),e?(zt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(E(document,"mouseup",o._onDrop),E(document,"touchend",o._onDrop),E(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(o,i,f)),S(document,"drop",o),p(f,"transform","translateZ(0)")),yt=!0,o._dragStartId=Jt(o._dragStarted.bind(o,e,t)),S(document,"selectstart",o),Ot=!0,Tt&&p(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,o=t.target,i,r,l,s=this.options,a=s.group,u=g.active,c=qt===a,d=s.sort,w=P||u,D,y=this,_=!1;if(le)return;function V(j,K){M(j,y,rt({evt:t,isOwner:c,axis:D?"vertical":"horizontal",revert:l,dragRect:i,targetRect:r,canSort:d,fromSortable:w,target:o,completed:N,onMove:function(mt,kt){return se(T,e,f,i,mt,O(mt),t,kt)},changed:Y},K))}function $(){V("dragOverAnimationCapture"),y.captureAnimationState(),y!==w&&w.captureAnimationState()}function N(j){return V("dragOverCompleted",{insertion:j}),j&&(c?u._hideClone():u._showClone(y),y!==w&&(F(f,P?P.options.ghostClass:u.options.ghostClass,!1),F(f,s.ghostClass,!0)),P!==y&&y!==g.active?P=y:y===g.active&&P&&(P=null),w===y&&(y._ignoreWhileAnimating=o),y.animateAll(function(){V("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(o===f&&!f.animated||o===e&&!o.animated)&&(Et=null),!s.dragoverBubble&&!t.rootEl&&o!==document&&(f.parentNode[B]._isOutsideThisEl(t.target),!j&&gt(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),_=!0}function Y(){X=z(f),ut=z(f,s.draggable),k({sortable:y,name:"change",toEl:e,newIndex:X,newDraggableIndex:ut,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=Z(o,s.draggable,e,!0),V("dragOver"),g.eventCanceled)return _;if(f.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||y._ignoreWhileAnimating===o)return N(!1);if(zt=!1,u&&!s.disabled&&(c?d||(l=!T.contains(f)):P===this||(this.lastPutMode=qt.checkPull(this,u,f,t))&&a.checkPut(this,u,f,t))){if(D=this._getDirection(t,o)==="vertical",i=O(f),V("dragOverValid"),g.eventCanceled)return _;if(l)return I=T,$(),this._hideClone(),V("revert"),g.eventCanceled||(ht?T.insertBefore(f,ht):T.appendChild(f)),N(!0);var W=ee(e,s.draggable);if(!W||Mn(t,D,this)&&!W.animated){if(W===f)return N(!1);if(W&&e===t.target&&(o=W),o&&(r=O(o)),se(T,e,f,i,o,r,t,!!o)!==!1)return $(),e.appendChild(f),I=e,Y(),N(!0)}else if(o.parentNode===e){r=O(o);var H=0,J,ft=f.parentNode!==e,ot=!Ln(f.animated&&f.toRect||i,o.animated&&o.toRect||r,D),R=D?"top":"left",G=Ne(o,"top","top")||Ne(f,"top","top"),ct=G?G.scrollTop:void 0;Et!==o&&(J=r[R],Lt=!1,jt=!ot&&s.invertSwap||ft),H=Fn(t,o,r,D,ot?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,jt,Et===o);var q;if(H!==0){var h=z(f);do h-=H,q=I.children[h];while(q&&(p(q,"display")==="none"||q===m))}if(H===0||q===o)return N(!1);Et=o,Pt=H;var v=o.nextElementSibling,b=!1;b=H===1;var C=se(T,e,f,i,o,r,t,b);if(C!==!1)return(C===1||C===-1)&&(b=C===1),le=!0,setTimeout(Vn,30),$(),b&&!v?e.appendChild(f):o.parentNode.insertBefore(f,b?v:o),G&&Ve(G,0,ct-G.scrollTop),I=f.parentNode,J!==void 0&&!jt&&(Ut=Math.abs(J-O(o)[R])),Y(),N(!0)}if(e.contains(f))return N(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){E(document,"mousemove",this._onTouchMove),E(document,"touchmove",this._onTouchMove),E(document,"pointermove",this._onTouchMove),E(document,"dragover",gt),E(document,"mousemove",gt),E(document,"touchmove",gt)},_offUpEvents:function(){var t=this.el.ownerDocument;E(t,"mouseup",this._onDrop),E(t,"touchend",this._onDrop),E(t,"pointerup",this._onDrop),E(t,"touchcancel",this._onDrop),E(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;if(X=z(f),ut=z(f,o.draggable),M("drop",this,{evt:t}),I=f&&f.parentNode,X=z(f),ut=z(f,o.draggable),g.eventCanceled){this._nulling();return}yt=!1,jt=!1,Lt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),fe(this.cloneId),fe(this._dragStartId),this.nativeDraggable&&(E(document,"drop",this),E(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Tt&&p(document.body,"user-select",""),p(f,"transform",""),t&&(Ot&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),m&&m.parentNode&&m.parentNode.removeChild(m),(T===I||P&&P.lastPutMode!=="clone")&&x&&x.parentNode&&x.parentNode.removeChild(x),f&&(this.nativeDraggable&&E(f,"dragend",this),ue(f),f.style["will-change"]="",Ot&&!yt&&F(f,P?P.options.ghostClass:this.options.ghostClass,!1),F(f,this.options.chosenClass,!1),k({sortable:this,name:"unchoose",toEl:I,newIndex:null,newDraggableIndex:null,originalEvent:t}),T!==I?(X>=0&&(k({rootEl:I,name:"add",toEl:I,fromEl:T,originalEvent:t}),k({sortable:this,name:"remove",toEl:I,originalEvent:t}),k({rootEl:I,name:"sort",toEl:I,fromEl:T,originalEvent:t}),k({sortable:this,name:"sort",toEl:I,originalEvent:t})),P&&P.save()):X!==wt&&X>=0&&(k({sortable:this,name:"update",toEl:I,originalEvent:t}),k({sortable:this,name:"sort",toEl:I,originalEvent:t})),g.active&&((X==null||X===-1)&&(X=wt,ut=At),k({sortable:this,name:"end",toEl:I,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){M("nulling",this),T=f=I=m=ht=x=Ht=st=pt=U=Ot=X=ut=wt=At=Et=Pt=P=qt=g.dragged=g.ghost=g.clone=g.active=null,$t.forEach(function(t){t.checked=!0}),$t.length=ie=ae=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":f&&(this._onDragOver(t),kn(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,o=this.el.children,i=0,r=o.length,l=this.options;i<r;i++)e=o[i],Z(e,l.draggable,this.el,!1)&&t.push(e.getAttribute(l.dataIdAttr)||Xn(e));return t},sort:function(t,e){var o={},i=this.el;this.toArray().forEach(function(r,l){var s=i.children[l];Z(s,this.options.draggable,i,!1)&&(o[r]=s)},this),e&&this.captureAnimationState(),t.forEach(function(r){o[r]&&(i.removeChild(o[r]),i.appendChild(o[r]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Z(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(e===void 0)return o[t];var i=It.modifyOption(this,t,e);typeof i!="undefined"?o[t]=i:o[t]=e,t==="group"&&He(o)},destroy:function(){M("destroy",this);var t=this.el;t[B]=null,E(t,"mousedown",this._onTapStart),E(t,"touchstart",this._onTapStart),E(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(E(t,"dragover",this),E(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Gt.splice(Gt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!st){if(M("hideClone",this),g.eventCanceled)return;p(x,"display","none"),this.options.removeCloneOnHide&&x.parentNode&&x.parentNode.removeChild(x),st=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(st){if(M("showClone",this),g.eventCanceled)return;f.parentNode==T&&!this.options.group.revertClone?T.insertBefore(x,f):ht?T.insertBefore(x,ht):T.appendChild(x),this.options.group.revertClone&&this.animate(f,x),p(x,"display",""),st=!1}}};function kn(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function se(n,t,e,o,i,r,l,s){var a,u=n[B],c=u.options.onMove,d;return window.CustomEvent&&!nt&&!Dt?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=t,a.from=n,a.dragged=e,a.draggedRect=o,a.related=i||t,a.relatedRect=r||O(t),a.willInsertAfter=s,a.originalEvent=l,n.dispatchEvent(a),c&&(d=c.call(u,a,l)),d}function ue(n){n.draggable=!1}function Vn(){le=!1}function Mn(n,t,e){var o=O(ee(e.el,e.options.draggable)),i=10;return t?n.clientX>o.right+i||n.clientX<=o.right&&n.clientY>o.bottom&&n.clientX>=o.left:n.clientX>o.right&&n.clientY>o.top||n.clientX<=o.right&&n.clientY>o.bottom+i}function Fn(n,t,e,o,i,r,l,s){var a=o?n.clientY:n.clientX,u=o?e.height:e.width,c=o?e.top:e.left,d=o?e.bottom:e.right,w=!1;if(!l){if(s&&Ut<u*i){if(!Lt&&(Pt===1?a>c+u*r/2:a<d-u*r/2)&&(Lt=!0),Lt)w=!0;else if(Pt===1?a<c+Ut:a>d-Ut)return-Pt}else if(a>c+u*(1-i)/2&&a<d-u*(1-i)/2)return Bn(t)}return w=w||l,w&&(a<c+u*r/2||a>d-u*r/2)?a>c+u/2?1:-1:0}function Bn(n){return z(f)<z(n)?1:-1}function Xn(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,o=0;e--;)o+=t.charCodeAt(e);return o.toString(36)}function Yn(n){$t.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var o=t[e];o.checked&&$t.push(o)}}function Jt(n){return setTimeout(n,0)}function fe(n){return clearTimeout(n)}Zt&&S(document,"touchmove",function(n){(g.active||yt)&&n.cancelable&&n.preventDefault()}),g.utils={on:S,off:E,css:p,find:Le,is:function(t,e){return!!Z(t,e,t,!1)},extend:Dn,throttle:ke,closest:Z,toggleClass:F,clone:Me,index:z,nextTick:Jt,cancelNextTick:fe,detectDirection:We,getChild:Wt},g.get=function(n){return n[B]},g.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(g.utils=rt({},g.utils,o.utils)),It.mount(o)})},g.create=function(n,t){return new g(n,t)},g.version=En;var A=[],Nt,ce,de=!1,he,pe,Kt,Rt;function Wn(){function n(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return n.prototype={dragStarted:function(e){var o=e.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):o.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var o=e.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):(E(document,"pointermove",this._handleFallbackAutoScroll),E(document,"touchmove",this._handleFallbackAutoScroll),E(document,"mousemove",this._handleFallbackAutoScroll)),Ge(),te(),Tn()},nulling:function(){Kt=ce=Nt=de=Rt=he=pe=null,A.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,o){var i=this,r=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(r,l);if(Kt=e,o||Dt||nt||Tt){ge(e,this.options,s,o);var a=lt(s,!0);de&&(!Rt||r!==he||l!==pe)&&(Rt&&Ge(),Rt=setInterval(function(){var u=lt(document.elementFromPoint(r,l),!0);u!==a&&(a=u,te()),ge(e,i.options,u,o)},10),he=r,pe=l)}else{if(!this.options.bubbleScroll||lt(s,!0)===Q()){te();return}ge(e,this.options,lt(s,!1),!1)}}},tt(n,{pluginName:"scroll",initializeByDefault:!0})}function te(){A.forEach(function(n){clearInterval(n.pid)}),A=[]}function Ge(){clearInterval(Rt)}var ge=ke(function(n,t,e,o){if(!!t.scroll){var i=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,a=Q(),u=!1,c;ce!==e&&(ce=e,te(),Nt=t.scroll,c=t.scrollFn,Nt===!0&&(Nt=lt(e,!0)));var d=0,w=Nt;do{var D=w,y=O(D),_=y.top,V=y.bottom,$=y.left,N=y.right,Y=y.width,W=y.height,H=void 0,J=void 0,ft=D.scrollWidth,ot=D.scrollHeight,R=p(D),G=D.scrollLeft,ct=D.scrollTop;D===a?(H=Y<ft&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),J=W<ot&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(H=Y<ft&&(R.overflowX==="auto"||R.overflowX==="scroll"),J=W<ot&&(R.overflowY==="auto"||R.overflowY==="scroll"));var q=H&&(Math.abs(N-i)<=l&&G+Y<ft)-(Math.abs($-i)<=l&&!!G),h=J&&(Math.abs(V-r)<=l&&ct+W<ot)-(Math.abs(_-r)<=l&&!!ct);if(!A[d])for(var v=0;v<=d;v++)A[v]||(A[v]={});(A[d].vx!=q||A[d].vy!=h||A[d].el!==D)&&(A[d].el=D,A[d].vx=q,A[d].vy=h,clearInterval(A[d].pid),(q!=0||h!=0)&&(u=!0,A[d].pid=setInterval(function(){o&&this.layer===0&&g.active._onTouchMove(Kt);var b=A[this.layer].vy?A[this.layer].vy*s:0,C=A[this.layer].vx?A[this.layer].vx*s:0;typeof c=="function"&&c.call(g.dragged.parentNode[B],C,b,n,Kt,A[this.layer].el)!=="continue"||Ve(A[this.layer].el,C,b)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&w!==a&&(w=lt(w,!1)));de=u}},30),je=function(t){var e=t.originalEvent,o=t.putSortable,i=t.dragEl,r=t.activeSortable,l=t.dispatchSortableEvent,s=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(!!e){var u=o||r;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(c.clientX,c.clientY);a(),u&&!u.el.contains(d)&&(l("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function me(){}me.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=Wt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:je},tt(me,{pluginName:"revertOnSpill"});function ve(){}ve.prototype={onSpill:function(t){var e=t.dragEl,o=t.putSortable,i=o||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:je},tt(ve,{pluginName:"removeOnSpill"}),g.mount(new Wn),g.mount(ve,me);var be={name:"layoutTagsView",components:{Contextmenu:vn},setup(){const{proxy:n}=un(),t=Ft([]),e=Ft(),o=Ft(),i=Ft(),r=mn(),l=Je(),s=Ke(),a=tn({routePath:l.path,dropdown:{x:"",y:""},tagsRefsIndex:0,tagsViewList:[],sortable:"",tagsViewRoutesList:[]}),u=Ce(()=>r.state.themeConfig.themeConfig.tagsStyle),c=Ce(()=>r.state.themeConfig.themeConfig),d=h=>{Bt.set("tagsViewList",h)},w=()=>{a.routePath=l.path,a.tagsViewList=[],r.state.themeConfig.themeConfig.isCacheTagsView||Bt.remove("tagsViewList"),a.tagsViewRoutesList=r.state.tagsViewRoutes.tagsViewRoutes,D()},D=()=>{Bt.get("tagsViewList")&&r.state.themeConfig.themeConfig.isCacheTagsView?a.tagsViewList=Bt.get("tagsViewList"):(a.tagsViewRoutesList.map(h=>{h.meta.isAffix&&!h.meta.isHide&&a.tagsViewList.push(dt({},h))}),y(l.path)),ct(l.path),G()},y=(h,v)=>{if(a.tagsViewList.some(C=>C.path===h))return!1;const b=a.tagsViewRoutesList.find(C=>C.path===h);if(b.meta.isLink&&!b.meta.isIframe)return!1;b.query=v&&v.query?v.query:l.query,a.tagsViewList.push(dt({},b)),d(a.tagsViewList)},_=h=>{n.mittBus.emit("onTagsViewRefreshRouterView",h)},V=h=>{a.tagsViewList.map((v,b,C)=>{v.meta.isAffix||v.path===h&&(a.tagsViewList.splice(b,1),setTimeout(()=>{a.tagsViewList.length===b?s.push({path:C[C.length-1].path,query:C[C.length-1].query}):s.push({path:C[b].path,query:C[b].query})},0))}),d(a.tagsViewList)},$=h=>{a.tagsViewList=[],a.tagsViewRoutesList.map(v=>{v.meta.isAffix&&!v.meta.isHide&&a.tagsViewList.push(dt({},v))}),y(h)},N=h=>{a.tagsViewList=[],a.tagsViewRoutesList.map(v=>{v.meta.isAffix&&!v.meta.isHide&&(a.tagsViewList.push(dt({},v)),a.tagsViewList.some(b=>b.path===h)?s.push({path:h,query:l.query}):s.push({path:v.path,query:l.query}))}),d(a.tagsViewList)},Y=h=>{const v=a.tagsViewList.find(b=>b.path===h);De(()=>{s.push({path:h,query:v.query});const b=document.querySelector(".layout-main");gn.request(b)})},W=h=>{let{id:v,path:b}=h,C=a.tagsViewList.find(j=>j.path===b);switch(v){case 0:_(b),s.push({path:b,query:C.query});break;case 1:V(b);break;case 2:s.push({path:b,query:C.query}),$(b);break;case 3:N(b);break;case 4:Y(b);break}},H=h=>h===a.routePath,J=(h,v)=>{const{clientX:b,clientY:C}=v;a.dropdown.x=b,a.dropdown.y=C,o.value.openContextmenu(h)},ft=(h,v)=>{a.routePath=h.path,a.tagsRefsIndex=v,s.push(h)},ot=()=>{n.$refs.scrollbarRef.update()},R=h=>{n.$refs.scrollbarRef.$refs.wrap.scrollLeft+=h.wheelDelta/4},G=()=>{De(()=>{if(t.value.length<=0)return!1;let h=t.value[a.tagsRefsIndex],v=a.tagsRefsIndex,b=t.value.length,C=t.value[0],j=t.value[t.value.length-1],K=n.$refs.scrollbarRef.$refs.wrap,we=K.scrollWidth,mt=K.offsetWidth,kt=K.scrollLeft,ye=t.value[a.tagsRefsIndex-1],Ee=t.value[a.tagsRefsIndex+1],Vt="",Mt="";h===C?K.scrollLeft=0:h===j?K.scrollLeft=we-mt:(v===0?Vt=C.offsetLeft-5:Vt=ye&&ye.offsetLeft-5,v===b?Mt=j.offsetLeft+j.offsetWidth+5:Mt=Ee.offsetLeft+Ee.offsetWidth+5,Mt>kt+mt?K.scrollLeft=Mt-mt:Vt<kt&&(K.scrollLeft=Vt)),ot()})},ct=h=>{a.tagsViewList.length>0&&(a.tagsRefsIndex=a.tagsViewList.findIndex(v=>v.path===h))},q=()=>{const h=document.querySelector(".layout-navbars-tagsview-ul");if(!h)return!1;c.value.isSortableTagsView||a.sortable&&a.sortable.destroy(),c.value.isSortableTagsView&&(a.sortable=g.create(h,{animation:300,dataIdAttr:"data-name",onEnd:()=>{const v=[];a.sortable.toArray().map(b=>{a.tagsViewList.map(C=>{C.name===b&&v.push(dt({},C))})}),d(v)}}))};return en(r.state,h=>{if(h.tagsViewRoutes.tagsViewRoutes.length===a.tagsViewRoutesList.length)return!1;w()}),nn(()=>{n.mittBus.on("onCurrentContextmenuClick",h=>{W(h)}),n.mittBus.on("openOrCloseSortable",()=>{q()})}),on(()=>{n.mittBus.off("onCurrentContextmenuClick"),n.mittBus.off("openOrCloseSortable")}),an(()=>{t.value=[]}),rn(()=>{w(),q()}),ln(h=>{a.routePath=h.path,y(h.path,h),ct(h.path),G()}),dt({isActive:H,onContextmenu:J,getTagsViewRoutes:w,onTagsClick:ft,tagsRefs:t,contextmenuRef:o,scrollbarRef:e,tagsUlRef:i,onHandleScroll:R,getThemeConfig:c,setTagsStyle:u,refreshCurrentTagsView:_,closeCurrentTagsView:V,onCurrentContextmenuClick:W},sn(a))}},Zn=`.layout-navbars-tagsview[data-v-1f9f92c0] {
  flex: 1;
  background-color: #ffffff;
  border-bottom: 1px solid #f1f2f3;
}
.layout-navbars-tagsview[data-v-1f9f92c0] .el-scrollbar__wrap {
  overflow-x: auto !important;
}
.layout-navbars-tagsview-ul[data-v-1f9f92c0] {
  list-style: none;
  margin: 0;
  padding: 0;
  height: 40px;
  display: flex;
  align-items: center;
  color: #606266;
  font-size: 12px;
  white-space: nowrap;
  padding: 0 15px;
}
.layout-navbars-tagsview-ul-li[data-v-1f9f92c0] {
  height: 26px;
  line-height: 26px;
  display: flex;
  align-items: center;
  border: 1px solid #e6e6e6;
  padding: 0 15px;
  margin-right: 5px;
  border-radius: 2px;
  position: relative;
  z-index: 0;
  cursor: pointer;
  justify-content: space-between;
}
.layout-navbars-tagsview-ul-li[data-v-1f9f92c0]:hover {
  background-color: var(--color-primary-light-9);
  color: var(--color-primary);
  border-color: var(--color-primary-light-6);
}
.layout-navbars-tagsview-ul-li-iconfont[data-v-1f9f92c0] {
  position: relative;
  left: -5px;
  font-size: 12px;
}
.layout-navbars-tagsview-ul-li-icon[data-v-1f9f92c0] {
  border-radius: 100%;
  position: relative;
  height: 14px;
  width: 14px;
  text-align: center;
  line-height: 14px;
  right: -5px;
}
.layout-navbars-tagsview-ul-li-icon[data-v-1f9f92c0]:hover {
  color: #fff;
  background-color: var(--color-primary-light-3);
}
.layout-navbars-tagsview-ul-li .layout-icon-active[data-v-1f9f92c0] {
  display: block;
}
.layout-navbars-tagsview-ul-li .layout-icon-three[data-v-1f9f92c0] {
  display: none;
}
.layout-navbars-tagsview-ul .is-active[data-v-1f9f92c0] {
  color: #ffffff;
  background: var(--color-primary);
  border-color: var(--color-primary);
}
.layout-navbars-tagsview .tags-style-two .layout-navbars-tagsview-ul-li[data-v-1f9f92c0] {
  height: 40px !important;
  line-height: 40px !important;
  border: none !important;
}
.layout-navbars-tagsview .tags-style-two .layout-navbars-tagsview-ul-li .layout-navbars-tagsview-ul-li-iconfont[data-v-1f9f92c0] {
  display: none;
}
.layout-navbars-tagsview .tags-style-two .layout-navbars-tagsview-ul-li .layout-icon-active[data-v-1f9f92c0] {
  display: none;
}
.layout-navbars-tagsview .tags-style-two .layout-navbars-tagsview-ul-li .layout-icon-three[data-v-1f9f92c0] {
  display: block;
}
.layout-navbars-tagsview .tags-style-two .is-active[data-v-1f9f92c0] {
  background: none !important;
  color: var(--color-primary) !important;
  border-bottom: 2px solid !important;
  border-color: var(--color-primary) !important;
  border-radius: 0 !important;
}
.layout-navbars-tagsview .tags-style-three .layout-navbars-tagsview-ul-li[data-v-1f9f92c0] {
  height: 40px !important;
  line-height: 40px !important;
  border-right: 1px solid #f6f6f6 !important;
  border-top: none !important;
  border-bottom: none !important;
  border-left: none !important;
  border-radius: 0 !important;
  margin-right: 0 !important;
}
.layout-navbars-tagsview .tags-style-three .layout-navbars-tagsview-ul-li[data-v-1f9f92c0]:first-of-type {
  border-left: 1px solid #f6f6f6 !important;
}
.layout-navbars-tagsview .tags-style-three .layout-navbars-tagsview-ul-li .layout-icon-active[data-v-1f9f92c0] {
  display: none;
}
.layout-navbars-tagsview .tags-style-three .layout-navbars-tagsview-ul-li .layout-icon-three[data-v-1f9f92c0] {
  display: block;
}
.layout-navbars-tagsview .tags-style-three .is-active[data-v-1f9f92c0] {
  background: white !important;
  color: var(--color-primary) !important;
  border-top: 1px solid !important;
  border-top-color: var(--color-primary) !important;
}
.layout-navbars-tagsview .tags-style-four .layout-navbars-tagsview-ul-li[data-v-1f9f92c0] {
  margin-right: 0 !important;
  border: none !important;
  position: relative;
  border-radius: 3px !important;
}
.layout-navbars-tagsview .tags-style-four .layout-navbars-tagsview-ul-li .layout-icon-active[data-v-1f9f92c0] {
  display: none;
}
.layout-navbars-tagsview .tags-style-four .layout-navbars-tagsview-ul-li .layout-icon-three[data-v-1f9f92c0] {
  display: block;
}
.layout-navbars-tagsview .tags-style-four .layout-navbars-tagsview-ul-li[data-v-1f9f92c0]:hover {
  background: none !important;
}
.layout-navbars-tagsview .tags-style-four .is-active[data-v-1f9f92c0] {
  background: none !important;
  color: var(--color-primary) !important;
}
.layout-navbars-tagsview-shadow[data-v-1f9f92c0] {
  box-shadow: rgba(0, 21, 41, 0.04) 0px 1px 4px;
}`;const Ue=pn();fn("data-v-1f9f92c0");const Hn={key:0,class:"iconfont icon-webicon318 layout-navbars-tagsview-ul-li-iconfont font14"};cn();const qn=Ue((n,t,e,o,i,r)=>{const l=Te("el-scrollbar"),s=Te("Contextmenu");return it(),at("div",{class:["layout-navbars-tagsview",{"layout-navbars-tagsview-shadow":o.getThemeConfig.layout==="classic"}]},[_t(l,{ref:"scrollbarRef",onWheel:St(o.onHandleScroll,["prevent"])},{default:Ue(()=>[_t("ul",{class:["layout-navbars-tagsview-ul",o.setTagsStyle],ref:"tagsUlRef"},[(it(!0),at(xe,null,dn(n.tagsViewList,(a,u)=>(it(),at("li",{key:u,class:["layout-navbars-tagsview-ul-li",{"is-active":o.isActive(a.path)}],"data-name":a.name,onContextmenu:St(c=>o.onContextmenu(a,c),["prevent"]),onClick:c=>o.onTagsClick(a,u),ref:c=>{c&&(o.tagsRefs[u]=c)}},[o.isActive(a.path)?(it(),at("i",Hn)):Ct("",!0),!o.isActive(a.path)&&o.getThemeConfig.isTagsviewIcon?(it(),at("i",{key:1,class:["layout-navbars-tagsview-ul-li-iconfont",a.meta.icon]},null,2)):Ct("",!0),_t("span",null,hn(n.$t(a.meta.title)),1),o.isActive(a.path)?(it(),at(xe,{key:2},[_t("i",{class:"el-icon-refresh-right ml5",onClick:St(c=>o.refreshCurrentTagsView(a.path),["stop"])},null,8,["onClick"]),a.meta.isAffix?Ct("",!0):(it(),at("i",{key:0,class:"el-icon-close layout-navbars-tagsview-ul-li-icon layout-icon-active",onClick:St(c=>o.closeCurrentTagsView(a.path),["stop"])},null,8,["onClick"]))],64)):Ct("",!0),a.meta.isAffix?Ct("",!0):(it(),at("i",{key:3,class:"el-icon-close layout-navbars-tagsview-ul-li-icon layout-icon-three",onClick:St(c=>o.closeCurrentTagsView(a.path),["stop"])},null,8,["onClick"]))],42,["data-name","onContextmenu","onClick"]))),128))],2)]),_:1},8,["onWheel"]),_t(s,{dropdown:n.dropdown,ref:"contextmenuRef",onCurrentContextmenuClick:o.onCurrentContextmenuClick},null,8,["dropdown","onCurrentContextmenuClick"])],2)});be.render=qn,be.__scopeId="data-v-1f9f92c0";export default be;
